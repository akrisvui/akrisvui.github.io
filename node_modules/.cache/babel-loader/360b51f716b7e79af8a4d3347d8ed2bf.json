{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\akrisvui.github.io\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\akrisvui.github.io\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\akrisvui.github.io\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import bridge from'@vkontakte/vk-bridge';import View from'@vkontakte/vkui/dist/components/View/View';import ScreenSpinner from'@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner';import'@vkontakte/vkui/dist/vkui.css';import Home from'./panels/Home';import Persik from'./panels/Persik';var App=function App(){var _useState=useState('home'),_useState2=_slicedToArray(_useState,2),activePanel=_useState2[0],setActivePanel=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),fetchedUser=_useState4[0],setUser=_useState4[1];var _useState5=useState(React.createElement(ScreenSpinner,{size:\"large\"})),_useState6=_slicedToArray(_useState5,2),popout=_useState6[0],setPopout=_useState6[1];useEffect(function(){bridge.subscribe(function(_ref){var _ref$detail=_ref.detail,type=_ref$detail.type,data=_ref$detail.data;if(type==='VKWebAppUpdateConfig'){var schemeAttribute=document.createAttribute('scheme');schemeAttribute.value=data.scheme?data.scheme:'client_light';document.body.attributes.setNamedItem(schemeAttribute);}});function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return bridge.send('VKWebAppGetUserInfo');case 2:user=_context.sent;setUser(user);setPopout(null);case 5:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[]);var go=function go(e){setActivePanel(e.currentTarget.dataset.to);};var perm=function perm(){//bridge.send(\"VKWebAppShowWallPostBox\", { \"owner_id \": -183268158, \"message\": \"Hello!\"});\nbridge.send(\"VKWebAppGetAuthToken\",{\"app_id\":7366121,\"scope\":\"wall\"});bridge.subscribe(function(e){//alert(JSON.stringify(e));\n//alert(JSON.stringify(e));\nif(e.detail.type==='VKWebAppAccessTokenReceived'){//alert(JSON.stringify(e.detail.data.access_token));\n//alert(JSON.stringify(e.detail.data.access_token));\nbridge.send(\"VKWebAppCallAPIMethod\",{\"method\":\"wall.post\",\"params\":{\"owner_id\":\"-183268158\",\"message\":\"Привет\",\"v\":\"5.103\",\"access_token\":e.detail.data.access_key}});var userB=bridge.send('VKWebAppGetUserInfo');alert(JSON.stringify(userB));alert(JSON.stringify(e));//}\n//alert(JSON.stringify(e));\n}});};return React.createElement(View,{activePanel:activePanel,popout:popout},React.createElement(Home,{id:\"home\",fetchedUser:fetchedUser,go:go,perm:perm}),React.createElement(Persik,{id:\"persik\",go:go}));};export default App;","map":{"version":3,"sources":["D:/akrisvui.github.io/src/App.js"],"names":["React","useState","useEffect","bridge","View","ScreenSpinner","Home","Persik","App","activePanel","setActivePanel","fetchedUser","setUser","popout","setPopout","subscribe","detail","type","data","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","fetchData","send","user","go","e","currentTarget","dataset","to","perm","access_key","userB","alert","JSON","stringify"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport ScreenSpinner from '@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Home from './panels/Home';\nimport Persik from './panels/Persik';\n\nconst App = () => {\n\tconst [activePanel, setActivePanel] = useState('home');\n\tconst [fetchedUser, setUser] = useState(null);\n\tconst [popout, setPopout] = useState(<ScreenSpinner size='large' />);\n\n\tuseEffect(() => {\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t}\n\t\t});\n\t\tasync function fetchData() {\n\t\t\tconst user = await bridge.send('VKWebAppGetUserInfo');\n\t\t\tsetUser(user);\n\t\t\tsetPopout(null);\n\t\t}\n\t\tfetchData();\n\t}, []);\n\n\tconst go = e => {\n\t\tsetActivePanel(e.currentTarget.dataset.to);\n\t};\n\tconst perm = () => {\n\t\t//bridge.send(\"VKWebAppShowWallPostBox\", { \"owner_id \": -183268158, \"message\": \"Hello!\"});\n\t\tbridge.send(\"VKWebAppGetAuthToken\", {\"app_id\": 7366121, \"scope\": \"wall\"});\n\t\tbridge.subscribe(e => {\n\t\t\t//alert(JSON.stringify(e));\n\t\t\t//alert(JSON.stringify(e));\n  \t\tif (e.detail.type === 'VKWebAppAccessTokenReceived') {\n\t\t\t\t//alert(JSON.stringify(e.detail.data.access_token));\n\t\t\t\t//alert(JSON.stringify(e.detail.data.access_token));\n\t\t\t\tbridge.send(\"VKWebAppCallAPIMethod\", {\"method\": \"wall.post\", \"params\": {\"owner_id\": \"-183268158\", \"message\": \"Привет\", \"v\":\"5.103\", \"access_token\": e.detail.data.access_key}});\n\t\t\t\tvar userB = bridge.send('VKWebAppGetUserInfo');\n\t\t\t\talert(JSON.stringify(userB));\n\t\t\t\talert(JSON.stringify(e));\n  \t//}\n\t\t//alert(JSON.stringify(e));\n\t}});\n}\n\n\treturn (\n\t\t<View activePanel={activePanel} popout={popout}>\n\t\t\t<Home id='home' fetchedUser={fetchedUser} go={go} perm={perm}/>\n\t\t\t<Persik id='persik' go={go} />\n\t\t</View>\n\t);\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}